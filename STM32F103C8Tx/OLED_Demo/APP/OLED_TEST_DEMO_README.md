# OLED测试Demo使用说明

## 概述

这是一个完整的0.96寸OLED测试Demo，展示了所有UI动画元素的功能。Demo会自动循环播放10个不同的演示场景，每个场景持续3秒。

## 功能特性

### 支持的屏幕
- **0.96寸 SSD1306** (128x64像素)
- 使用 **I2C1** (PB6/PB7引脚)

### 演示场景

Demo包含以下10个场景，按顺序循环播放：

1. **启动画面** - 显示Demo标题和屏幕信息
2. **像素点动画** - 演示像素点的移动和轨迹效果
3. **线条动画** - 演示动态线条的绘制
4. **矩形动画** - 演示矩形和填充矩形的动画效果
5. **圆形动画** - 演示圆形和填充圆形的动画效果
6. **进度条动画** - 演示进度条的动画效果
7. **滚动文本** - 演示文本滚动效果
8. **缓动函数演示** - 展示不同缓动函数的动画效果
9. **复杂UI组合** - 综合展示多个UI元素组合
10. **结束画面** - 显示Demo结束信息

## 使用方法

### 1. 包含头文件

在 `main.c` 中已经包含了测试Demo的头文件：

```c
#include "oled_test_demo.h"
```

### 2. 在主循环中调用

在 `main.c` 的 `while(1)` 循环中调用：

```c
while (1)
{
    /* OLED测试Demo - 包含所有UI动画元素顺序演示 */
    OLED_TestDemo_Main();
    
    /* 延时，避免CPU占用过高 */
    HAL_Delay(10);
}
```

### 3. 编译和运行

1. 确保I2C1已正确配置（PB6/PB7）
2. 确保OLED连接到I2C1，地址为0x78
3. 编译并下载到STM32
4. 运行后，OLED会自动开始演示

## 场景详细说明

### 场景1：启动画面
- 显示"OLED Test"
- 显示"Demo Start"
- 显示"0.96\" SSD1306"

### 场景2：像素点动画
- 一个像素点在屏幕上移动
- 显示移动轨迹
- 使用缓入缓出动画

### 场景3：线条动画
- 从屏幕中心辐射出动态线条
- 线条端点跟随动画移动
- 形成动态几何图案

### 场景4：矩形动画
- 矩形的位置和大小动态变化
- 同时显示矩形框和填充矩形
- 展示矩形动画效果

### 场景5：圆形动画
- 圆形半径动态变化
- 显示多个同心圆
- 中心填充圆形

### 场景6：进度条动画
- 进度条从0%到100%循环动画
- 显示百分比数值
- 使用缓入缓出动画

### 场景7：滚动文本
- 文本从右向左滚动
- 显示长文本内容
- 循环滚动效果

### 场景8：缓动函数演示
- 同时展示三种缓动函数：
  - Linear（线性）
  - EaseIn（缓入）
  - EaseOut（缓出）
- 三个点同时移动，展示不同效果

### 场景9：复杂UI组合
- 8条从中心辐射的旋转线条
- 6个小圆围绕中心旋转
- 中心填充圆
- 底部进度条
- 综合展示多个动画元素

### 场景10：结束画面
- 显示"Demo End"
- 显示"Restart..."
- 显示"Loop Mode"

## 配置参数

可以在 `oled_test_demo.c` 中修改以下参数：

```c
#define DEMO_SCENE_DURATION    3000  /* 每个场景持续时间（毫秒） */
#define ANIM_UPDATE_INTERVAL   50    /* 动画更新间隔（毫秒） */
```

- `DEMO_SCENE_DURATION`: 每个场景的持续时间，默认3秒
- `ANIM_UPDATE_INTERVAL`: 动画更新间隔，默认50毫秒（20fps）

## 技术特点

1. **完全解耦设计** - 使用结构体和函数指针
2. **分区刷新** - 只刷新修改的像素区域，提高效率
3. **流畅动画** - 使用缓动函数实现平滑动画
4. **多种UI元素** - 包含所有支持的UI绘制功能
5. **自动循环** - Demo自动循环播放，无需手动控制

## 注意事项

1. **I2C配置** - 确保I2C1已正确配置为400kHz，使用DMA传输
2. **OLED地址** - 确保OLED的I2C地址为0x78
3. **帧缓冲区** - 帧缓冲区大小为1024字节（128×64÷8）
4. **刷新频率** - 建议保持20fps的刷新频率，避免DMA冲突
5. **CPU占用** - Demo在主循环中运行，已添加10ms延时降低CPU占用

## 故障排除

### OLED无显示
- 检查I2C连接（PB6/PB7）
- 检查OLED电源
- 检查I2C地址（尝试0x7A）
- 检查I2C配置是否正确

### 显示异常
- 检查帧缓冲区大小是否正确
- 检查刷新函数是否正常调用
- 检查DMA传输是否完成

### 动画卡顿
- 增加 `ANIM_UPDATE_INTERVAL` 的值
- 减少动画复杂度
- 检查系统时钟配置

## 扩展功能

可以基于此Demo扩展以下功能：

1. **添加新场景** - 在 `DemoScene_t` 枚举中添加新场景
2. **修改动画参数** - 调整动画持续时间、缓动函数等
3. **添加交互** - 通过按键切换场景或暂停/继续
4. **添加更多UI元素** - 使用其他UI绘制函数

## 总结

这个测试Demo完整展示了OLED驱动的所有功能，包括：
- 基础绘制（像素、线条、矩形、圆形）
- 动画系统
- UI组件（进度条、滚动文本）
- 缓动函数
- 分区刷新

适合用于：
- 功能测试
- 性能评估
- 演示展示
- 学习参考

